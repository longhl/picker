/*DROP TABLE IF EXISTS T_INSTITUTION;*/
CREATE TABLE IF NOT EXISTS T_INSTITUTION
(
  ID BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT '主键ID',
  NAME VARCHAR(30) NULL DEFAULT NULL COMMENT '单位名称',
  STATUS CHAR(1) NULL DEFAULT '1' COMMENT '状态：0:-已删除，1：生效中',
  CFG_STATUS CHAR(1) NULL DEFAULT '0' COMMENT '状态：0:-未配置，1：已配置',
  PRIMARY KEY (ID)
);

ALTER TABLE IF EXISTS T_INSTITUTION ADD COLUMN IF NOT EXISTS CITY VARCHAR(500);

/*DROP TABLE IF EXISTS T_SUBJECT;*/
CREATE TABLE IF NOT EXISTS  T_SUBJECT
(
  ID BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT '主键ID',
  NAME VARCHAR(30) NULL DEFAULT NULL COMMENT '科目名称',
  PRIMARY KEY (ID)
);


CREATE TABLE IF NOT EXISTS T_SUBJECT_INST_REL
(
  SUB_ID BIGINT(20) NOT NULL  COMMENT '科目主键',
  INST_ID BIGINT(20) NOT NULL  COMMENT '供方主键',
  LEVEL_ID  BIGINT(20) NOT NULL DEFAULT 0 COMMENT '供方评级代码',
  LEVEL_NAME  VARCHAR(500) NOT NULL DEFAULT '常规' COMMENT '供方评级'
);

ALTER TABLE IF EXISTS T_SUBJECT_INST_REL ADD COLUMN IF NOT EXISTS LEVEL_ID BIGINT(20) NOT NULL DEFAULT 0 ;
ALTER TABLE IF EXISTS T_SUBJECT_INST_REL ADD COLUMN IF NOT EXISTS LEVEL_NAME VARCHAR(500) NOT NULL DEFAULT '常规';

/*DROP TABLE IF EXISTS T_PROJECT;*/
CREATE TABLE IF NOT EXISTS T_PROJECT
(
  ID BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT '主键ID',
  SUB_ID BIGINT(20) NOT NULL  COMMENT '科目ID',
  NAME VARCHAR(500) NULL DEFAULT NULL COMMENT '项目名称',
  DRAWER VARCHAR(30) NULL DEFAULT NULL COMMENT '摇号人',
  RECORDER VARCHAR(30) NULL DEFAULT NULL COMMENT '记录人',
  DATE DATE NULL DEFAULT NULL COMMENT '日期',
  DRAWNUM BIGINT(30) NULL DEFAULT NULL COMMENT '中签数',
  AMOUNT BIGINT(30) NULL DEFAULT NULL COMMENT '总数',
  PRIMARY KEY (ID),
  SOURCE VARCHAR(30)
);


CREATE TABLE IF NOT EXISTS T_PROJECT_INST_REL
(
  PRO_ID BIGINT(20) NOT NULL  COMMENT '项目主键',
  INST_ID BIGINT(20) NOT NULL  COMMENT '供方主键'
);


/*DROP TABLE IF EXISTS T_DRAW_HIS;*/
CREATE TABLE IF NOT EXISTS T_DRAW_HIS
(
  ID BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT '主键',
  PRO_ID BIGINT(20) NOT NULL COMMENT '项目主键',
  TARGET_ELEMENTS VARCHAR(500) NOT NULL  COMMENT '中签方主键，逗号分隔',
  ALL_ELEMENTS VARCHAR(500) NOT NULL  COMMENT '参与方主键，逗号分隔',
  VERSION BIGINT(20) COMMENT '批次',
  CREATE_TIME DATE,
  PRIMARY KEY (ID)
);

CREATE TABLE IF NOT EXISTS T_PARAMETER
(
PARAM_KEY VARCHAR(500) NOT NULL,
PARAM_VAL VARCHAR(4000)
);



